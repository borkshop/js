<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <title>jspit: ColorBoop demo</title>
  </head>
  <body>

    <header></header>

    <main>
      <aside class="modal">

        <section>
          <h1 align="center">Welcome traveler</h1>

          <h2>
            Boop a color, get a color!
          </h2>

          <p>
            This is the first and simplest example of jspit's <code>TileGrid</code>.
          </p>
          <p>
            <button id="run">Ok!</button>
            <button id="reset">Reset</button>
          </p>
        </section>

        <fieldset id="inspector">
          <legend>
            <label for="inspector-ids">Tiles @<span data-for="pos">X,Y</span>:</label>
          </legend>
          <textarea readonly style="border: none; resize: none; user-select: all; width: 100%;"></textarea>
        </fieldset>

        <section>
          <h3>
            <a href="index.html">Back to Welcome screen</a>
          </h3>
        </section>

      </aside>
      <div class="grid"></div>
    </main>

    <div class="buttonbar moves left"></div>
    <div class="buttonbar actions right float"></div>

    <script type="module">
      import {fillRect} from 'cdom/builder';

      function reset(grid) {
        const colors = [
          'black',
          'darker-grey',
          'dark-grey',
          'grey',
          'light-grey',
          'lighter-grey',
          'white',
          'dark-white',
          'blue',
          'bright-purple',
          'cyan',
          'dark-orange',
          'dark-sea-green',
          'green',
          'light-cyan',
          'magenta',
          'orange',
          'purple',
          'red',
          'red-orange',
          'yellow',
          'yellow-orange',
        ];

        grid.clear();

        const pos = {x: 10, y: 10};
        grid.createTile({pos, kind: 'mover', classList: ['input', 'support'], text: '@'});
        grid.viewPoint = pos;

        colors.forEach((color, i) => {
          grid.createTile({
            pos: {x: 5, y: i},
            kind: 'swatch',
            classList: 'interact',
            text: '$',
            style: {color: `var(--${color})`},
            data: {
              name: `fg:${color}`,
              morph_subject: {
                style: {color: `var(--${color})`},
              },
            },
          });
          grid.createTile({
            pos: {x: 15, y: i},
            kind: 'swatch',
            classList: 'interact',
            text: '$',
            style: {backgroundColor: `var(--${color})`},
            data: {
              name: `bg:${color}`,
              morph_subject: {
                style: {backgroundColor: `var(--${color})`},
              },
            },
          });
        });
      }

      import {DOMgeon, DOMgeonInspector} from 'cdom/domgeon';
      const dmg = window.dmg = new DOMgeon({
        ui: document.body,
        grid: document.querySelector('main .grid'),
        moveBar: document.querySelector('.buttonbar.moves'),
        actionBar: document.querySelector('.buttonbar.actions'),
      });
      new DOMgeonInspector(dmg, document.querySelector('#inspector'));

      document.querySelector('#reset').addEventListener('click', () => { reset(dmg.grid) });
      document.querySelector('#run').addEventListener('click', () => { dmg.start() });
      reset(dmg.grid);
    </script>
  </body>

</html>
<!-- vim:set ts=2 sw=2 expandtab -->
